<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CrazyGift - Case Opening</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/cases/case.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="app-logo" onclick="goBack()">
            <img src="assets/icons/triangle_icon.png" alt="Back">
        </div>
        
        <div class="balance-widget" onclick="window.location.href='balance.html'">
            <img src="assets/icons/wallet_icon.png" alt="Stars" class="balance-icon">
            <span class="balance-amount" id="balance">1451</span>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Case Header -->
        <section class="case-header">
            <h1 class="case-title" id="caseTitle">Telegram Case #1</h1>
        </section>

        <!-- Roulette Section -->
        <section class="roulette-section">
            <div class="roulette-container">
                <div class="roulette-pointer">
                    <div class="pointer-line">
                        <div class="pointer-arrow"></div>
                    </div>
                </div>
                <div class="roulette-line" id="rouletteLine">
                    <!-- Items will be generated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Open Button -->
        <button class="open-button" id="openButton" onclick="openCase()">
            Открыть кейс
        </button>

        <!-- Case Contents -->
        <section class="case-contents">
            <h3 class="contents-title">Содержимое кейса</h3>
            <div class="contents-grid" id="contentsGrid">
                <!-- Items will be generated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- Prize Modal -->
    <div class="prize-modal" id="prizeModal">
        <div class="prize-modal-overlay"></div>
        <div class="prize-content">
            <div class="prize-header">
                <div class="case-name" id="modalCaseName">Telegram Case #1</div>
                <div class="congrats-text">Поздравляем!</div>
            </div>
            
            <div class="prize-main">
                <div class="prize-image-container" id="prizeImageContainer">
                    <div class="prize-glow-effect"></div>
                    <img class="prize-image" id="prizeImage" src="assets/gifts/gift2.png" alt="Prize">
                    <div class="prize-values-overlay">
                        <div class="prize-value-ton">
                            <img src="assets/icons/ton_icon.png" alt="TON" class="value-icon-small">
                            <span id="prizeTonValue">25.6</span>
                        </div>
                        <div class="prize-value-stars">
                            <img src="assets/icons/star_icon.png" alt="Stars" class="value-icon-small">
                            <span id="prizeStarsValue">2 556</span>
                        </div>
                    </div>
                </div>
                
                <div class="prize-info">
                    <h3 class="prize-name" id="prizeName">Signet Ring</h3>
                    <div class="prize-rarity" id="prizeRarity">Случайный</div>
                </div>
            </div>
            
            <div class="prize-actions">
                <button class="prize-btn prize-btn-primary" onclick="sellPrize()">
                    Продать
                </button>
                <div class="prize-actions-secondary">
                    <button class="prize-btn prize-btn-secondary" onclick="withdrawPrize()">
                        Вывести
                    </button>
                    <button class="prize-btn prize-btn-secondary" onclick="keepPrize()">
                        Оставить
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-item active">
                <img src="assets/icons/home_icon.png" alt="Home" class="nav-icon">
                <span class="nav-text">Main</span>
            </a>
            <a href="inventory.html" class="nav-item">
                <img src="assets/icons/upgrade_icon.png" alt="Inventory" class="nav-icon">
                <span class="nav-text">Upgrade</span>
            </a>
            <a href="history.html" class="nav-item">
                <img src="assets/icons/refferal_icon.png" alt="History" class="nav-icon">
                <span class="nav-text">Partner</span>
            </a>
        </div>
    </nav>

    <!-- Scripts -->
    <script src="js/telegram-webapp-init.js"></script>
    
    <!-- API Infrastructure -->
    <script src="js/game-state.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/api-detector.js"></script>
    <script src="js/integration-wrapper.js"></script>
    
    <!-- Page Scripts -->
    <script src="js/cases/case.js"></script>
</body>
</html>