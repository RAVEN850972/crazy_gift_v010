# üìã –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Backend —Å Frontend

## üéØ **–¶–µ–ª—å:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

---

## **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (30 –º–∏–Ω)**

### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª–∏–µ–Ω—Ç–∞
```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª Week1/js/api-client.js
touch Week1/js/api-client.js
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:**
- –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `ApiClient` —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ retry
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### 1.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
```bash
# –í .env –¥–æ–±–∞–≤–∏—Ç—å:
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,file://
```

### 1.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏
- –ó–∞–ø—É—Å—Ç–∏—Ç—å backend: `python3 run.py`
- –û—Ç–∫—Ä—ã—Ç—å http://localhost:8000/docs
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health`

---

## **–≠—Ç–∞–ø 2: –ë–∞–∑–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (45 –º–∏–Ω)**

### 2.1 –û–±–Ω–æ–≤–∏—Ç—å `js/main.js`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
async function initializeApp() {
    try {
        const user = await window.apiClient.authenticateUser();
        window.GameState.user = user;
        window.GameState.currentUserId = user.id;
        window.GameState.balance = user.balance_stars;
        window.GameState.demoMode = false;
    } catch (error) {
        console.warn('API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–µ–º–æ —Ä–µ–∂–∏–º');
        window.GameState.demoMode = true;
    }
}
```

### 2.2 –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `updateBalance()`
```javascript
async function updateBalance() {
    if (window.GameState?.demoMode) {
        // –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞
        return;
    }
    
    try {
        const balance = await window.apiClient.getUserBalance(window.GameState.currentUserId);
        window.GameState.balance = balance.balance_stars;
        document.getElementById('balance').textContent = balance.balance_stars;
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:', error);
    }
}
```

### 2.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—ä–µ–∫—Ç `window.GameState`
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ë–î

---

## **–≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–µ–π—Å–æ–≤ (60 –º–∏–Ω)**

### 3.1 –û–±–Ω–æ–≤–∏—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (`index.html`)
**–ó–∞–≥—Ä—É–∑–∫–∞ –∫–µ–π—Å–æ–≤ –∏–∑ API:**
```javascript
// –í main.js –¥–æ–±–∞–≤–∏—Ç—å
async function loadCases() {
    if (window.GameState?.demoMode) return;
    
    try {
        const cases = await window.apiClient.getCases();
        renderCases(cases);
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–µ–π—Å–æ–≤:', error);
    }
}

function renderCases(cases) {
    const casesGrid = document.querySelector('.cases-grid');
    casesGrid.innerHTML = cases.map(case => `
        <div class="case-card" onclick="window.location.href='case-detail.html?id=${case.id}'">
            <div class="case-image">
                <img src="${case.image_url}" alt="${case.name}">
            </div>
            <div class="case-title">${case.name}</div>
            <div class="case-price">
                ${case.price_stars}
                <img src="assets/icons/star_icon.png" alt="Stars">
            </div>
        </div>
    `).join('');
}
```

### 3.2 –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–µ–π—Å–∞ (`js/cases/case.js`)
**–†–µ–∞–ª—å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤:**
```javascript
async function openCase() {
    if (isSpinning) return;
    
    const caseId = getCaseIdFromUrl();
    
    if (window.GameState?.demoMode) {
        return simulateOldCaseOpening();
    }
    
    try {
        isSpinning = true;
        updateOpenButton('–û—Ç–∫—Ä—ã—Ç–∏–µ...');
        
        const result = await window.apiClient.openCase(caseId, window.GameState.currentUserId);
        
        if (result.success) {
            window.GameState.balance = result.new_balance;
            updateBalance();
            showPrizeResult(result.item);
            animateRoulette(result.item);
        } else {
            showNotification(result.message, 'error');
        }
    } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–µ–π—Å–∞', 'error');
    } finally {
        isSpinning = false;
        updateOpenButton('–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å');
    }
}
```

### 3.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∫–µ–π—Å–æ–≤ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π
- –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π –∫–µ–π—Å
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –±–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ

---

## **–≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è (45 –º–∏–Ω)**

### 4.1 –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (`js/profile/profile.js`)
**–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è:**
```javascript
async function loadInventory() {
    if (window.GameState?.demoMode) return;
    
    try {
        const inventory = await window.apiClient.getInventory(window.GameState.currentUserId);
        renderInventory(inventory);
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è:', error);
    }
}

function renderInventory(items) {
    const inventoryGrid = document.getElementById('inventoryGrid');
    
    if (!items.length) {
        inventoryGrid.innerHTML = '<div class="empty-inventory">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div>';
        return;
    }
    
    inventoryGrid.innerHTML = items.map(item => `
        <div class="inventory-item ${item.rarity}" onclick="selectItem(this)" data-item-id="${item.id}">
            <div class="item-value">
                <img src="assets/icons/ton_icon.png" alt="TON">
                ${item.item_value}
            </div>
            <img src="${item.image_url}" alt="${item.item_name}">
        </div>
    `).join('');
}
```

### 4.2 –†–µ–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
```javascript
async function sellPrize() {
    if (window.GameState?.demoMode) {
        return sellPrizeDemo();
    }
    
    try {
        const itemId = window.currentInventoryItem.element.dataset.itemId;
        const result = await window.apiClient.sellItem(itemId, window.GameState.currentUserId);
        
        if (result.success) {
            window.GameState.balance = result.new_balance;
            updateBalance();
            window.currentInventoryItem.element.remove();
            closePrizeModal();
            showNotification(result.message, 'success');
        }
    } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ', 'error');
    }
}
```

### 4.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –ü—Ä–æ–¥–∞—Ç—å –ª—é–±–æ–π –ø—Ä–µ–¥–º–µ—Ç
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –±–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–∏–ª—Å—è

---

## **–≠—Ç–∞–ø 5: –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (90 –º–∏–Ω)**

### 5.1 –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–∞–ª–∞–Ω—Å–∞ (`js/balance/balance.js`)
**TON –ø–ª–∞—Ç–µ–∂–∏:**
```javascript
async function processRealTonPayment(amount) {
    if (window.GameState?.demoMode) {
        return processDepositDemo(amount);
    }
    
    try {
        showLoadingModal('–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...');
        
        const response = await window.apiClient.createTonDeposit(
            window.GameState.currentUserId, 
            amount
        );
        
        hideLoadingModal();
        
        if (window.tonConnectUI) {
            await window.tonConnectUI.sendTransaction(response.ton_transaction);
            showNotification('–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞', 'info');
            
            // –°–∏–º—É–ª—è—Ü–∏—è webhook –¥–ª—è –¥–µ–º–æ
            setTimeout(() => simulateWebhook(response.transaction_id), 3000);
        }
    } catch (error) {
        hideLoadingModal();
        showNotification('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞', 'error');
    }
}
```

**Telegram Stars:**
```javascript
async function processStarsPayment(starsAmount) {
    if (window.GameState?.demoMode) {
        return processDepositDemo(starsAmount);
    }
    
    try {
        const response = await window.apiClient.createStarsInvoice(
            window.GameState.currentUserId,
            starsAmount
        );
        
        if (window.Telegram?.WebApp) {
            window.Telegram.WebApp.openInvoice(response.invoice_link);
        } else {
            window.open(response.invoice_link, '_blank');
        }
    } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–≤–æ–π—Å–∞', 'error');
    }
}
```

### 5.2 –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram –ø–ª–∞—Ç–µ–∂–µ–π
```javascript
function setupTelegramPaymentHandlers() {
    if (window.Telegram?.WebApp) {
        window.Telegram.WebApp.onEvent('invoiceClosed', async (eventData) => {
            if (eventData.status === 'paid') {
                showNotification('–ü–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–µ–Ω!', 'success');
                setTimeout(() => updateBalance(), 2000);
            }
        });
    }
}
```

### 5.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Stars (–¥–µ–º–æ)
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ TON (–¥–µ–º–æ)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

---

## **–≠—Ç–∞–ø 6: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback (30 –º–∏–Ω)**

### 6.1 –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
```javascript
// js/api-detector.js
class ApiDetector {
    static async checkApiAvailability() {
        try {
            const response = await fetch('http://localhost:8000/health');
            return response.ok;
        } catch {
            return false;
        }
    }
    
    static async initializeApp() {
        const apiAvailable = await this.checkApiAvailability();
        
        if (apiAvailable) {
            await window.apiClient.authenticateUser();
            window.GameState.demoMode = false;
            console.log('‚úÖ API —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω');
        } else {
            window.GameState.demoMode = true;
            console.log('‚ö†Ô∏è –î–µ–º–æ —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω');
            showNotification('–î–µ–º–æ —Ä–µ–∂–∏–º: –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è', 'info');
        }
    }
}
```

### 6.2 –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –æ–±–µ—Ä—Ç–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π
```javascript
// –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
async function executeWithFallback(apiOperation, demoOperation) {
    if (window.GameState?.demoMode) {
        return demoOperation();
    }
    
    try {
        return await apiOperation();
    } catch (error) {
        console.error('API error, falling back to demo:', error);
        return demoOperation();
    }
}
```

---

## **–≠—Ç–∞–ø 7: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HTML —Ñ–∞–π–ª–æ–≤ (20 –º–∏–Ω)**

### 7.1 –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –≤–æ –≤—Å–µ HTML —Ñ–∞–π–ª—ã
**–í –∫–∞–∂–¥—ã–π HTML —Ñ–∞–π–ª –ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤:**
```html
<!-- API Integration -->
<script src="js/api-client.js"></script>
<script src="js/api-detector.js"></script>
```

### 7.2 –û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏
**–í index.html:**
```html
<script src="js/telegram-webapp-init.js"></script>
<script src="js/api-client.js"></script>
<script src="js/api-detector.js"></script>
<script src="js/main.js"></script>
```

---

## **–≠—Ç–∞–ø 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ (45 –º–∏–Ω)**

### 8.1 –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å backend
1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å backend:** `python3 run.py`
2. **–û—Ç–∫—Ä—ã—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:** `http://localhost:3000`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:** –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
4. **–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å:** –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å:** –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
6. **–ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç:** –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
7. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏:** –¥–µ–º–æ —Ä–µ–∂–∏–º

### 8.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ backend
1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å backend**
2. **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–º–æ —Ä–µ–∂–∏–º:** –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
4. **–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å:** localStorage –≤–µ—Ä—Å–∏—è
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:** "–î–µ–º–æ —Ä–µ–∂–∏–º"

### 8.3 –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º
- **CORS –æ—à–∏–±–∫–∏:** –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS_ORIGINS
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram WebApp data
- **API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:** fallback –≤ –¥–µ–º–æ —Ä–µ–∂–∏–º

---

## **–≠—Ç–∞–ø 9: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è (30 –º–∏–Ω)**

### 9.1 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```javascript
class CacheManager {
    static cache = new Map();
    
    static async getWithCache(key, fetcher, ttl = 60000) {
        if (this.cache.has(key)) {
            const { data, timestamp } = this.cache.get(key);
            if (Date.now() - timestamp < ttl) {
                return data;
            }
        }
        
        const data = await fetcher();
        this.cache.set(key, { data, timestamp: Date.now() });
        return data;
    }
}
```

### 9.2 –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```javascript
// –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
setInterval(async () => {
    if (!window.GameState?.demoMode) {
        await updateBalance();
    }
}, 30000);
```

### 9.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è UI
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∞–¥–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö API –æ–ø–µ—Ä–∞—Ü–∏–π
- –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É

---

## **–≠—Ç–∞–ø 10: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (15 –º–∏–Ω)**

### 10.1 –ß–µ–∫-–ª–∏—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–µ–π—Å–æ–≤ –∏–∑ API
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏–∑ –ë–î
- ‚úÖ –ü—Ä–æ–¥–∞–∂–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –î–µ–º–æ —Ä–µ–∂–∏–º –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏ (–¥–µ–º–æ –≤–µ—Ä—Å–∏—è)

### 10.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- –û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å UI
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## **üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤**

```
Week1/
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ api-client.js          # ‚ú® –ù–û–í–´–ô - API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ api-detector.js        # ‚ú® –ù–û–í–´–ô - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ API
‚îÇ   ‚îú‚îÄ‚îÄ main.js                # üîÑ –û–ë–ù–û–í–õ–ï–ù - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ cases/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ case.js           # üîÑ –û–ë–ù–û–í–õ–ï–ù - —Ä–µ–∞–ª—å–Ω—ã–µ –∫–µ–π—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ profile/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile.js        # üîÑ –û–ë–ù–û–í–õ–ï–ù - —Ä–µ–∞–ª—å–Ω—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
‚îÇ   ‚îú‚îÄ‚îÄ balance/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ balance.js        # üîÑ –û–ë–ù–û–í–õ–ï–ù - —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îî‚îÄ‚îÄ settings/
‚îÇ       ‚îî‚îÄ‚îÄ settings.js       # ‚úÖ –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô
‚îî‚îÄ‚îÄ *.html                    # üîÑ –û–ë–ù–û–í–õ–ï–ù–´ - –Ω–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
```

---

## **üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤:

1. **üîê –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è
2. **üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ë–î
3. **üí∞ –†–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏** - TON –∏ Stars –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞
4. **üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º** - –∑–∞–≥—Ä—É–∑–∫–∞, –ø—Ä–æ–¥–∞–∂–∞, –≤—ã–≤–æ–¥
5. **üîÑ Graceful fallback** - —Ä–∞–±–æ—Ç–∞ –≤ –¥–µ–º–æ —Ä–µ–∂–∏–º–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
6. **‚ö° –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–í—Ä–µ–º—è—Å—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 6-8 —á–∞—Å–æ–≤**
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Week 3: 100%** üöÄ